#!/usr/bin/env bash
# Clojure wrapper script.
# With no arguments, runs Clojure's REPL.

# resolve links - $0 may be a softlink
clj_version="1.4.0"
classpath="${CLASSPATH}:$(brew --cellar)/clojure/${clj_version}/clojure-${clj_version}.jar:${PWD}"
breakchars="(){}[],^%$#@\"\";:''|\\"

if [[ "$#" -eq 0 ]]; then
    exec rlwrap --remember -c -b "$breakchars" -f "${HOME}/.clj_completions" \
        java -cp "$classpath" clojure.main
else
    exec java -cp "$classpath" clojure.main "$@"
fi
